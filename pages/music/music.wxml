<!--pages/music/music.wxml-->
<!-- <nav></nav> -->
<!-- <text>pages/music/music.wxml</text> -->
<block>
  <view class="padding bg-white bg-gradual-green" hidden="{{TabCur!=3}}">
    <view class="padding text-center text-df">
      <text class="text-Abc">{{songData.name + ' ------ ' + songData.singer }}</text>
    </view>
    <view class='music_poster mar0_a'>
      <image class="{{isplay == false ? 'an' : ''}}" id="pic" src='{{poster}}'></image>
    </view>
  </view>
  <!-- 播放器 -->
  <view class="timeBox bg-gradual-green section_gap playCtr">
    <view class='timePlay fl'>
      <view bindtap='onAudioPlay' wx:if="{{isplay}}">
        <image class='w40 h40' src='/imgs/icons/play.png'></image>
      </view>
      <view bindtap='onAudioPause' wx:if="{{!isplay}}">
        <image class='w40 h40' src='/imgs/icons/pause.png'></image>
      </view>
    </view>
    <view class="fl w250">
      <view class="body-view">
        <slider bindchanging="onAudioPause" bindchange="changeTime" step="1" value='{{currentTime}}' min='0' max='{{duration}}' block-size='16' left-icon="cancel" right-icon="success_no_circle"/>
      </view>
    </view>
    <view class='fl fc_f h40 lh40'>
      {{currentTimeText}}
    </view>
  </view>
  <!-- 播放器 end -->
  <scroll-view scroll-x class="bg-green nav text-center">
    <view class="cu-item {{0==TabCur?'text-white cur':''}}" bindtap="tabSelect" data-id="0">
      <text class="icon-camerafill"></text> 搜索
    </view>
    <view class="cu-item {{1==TabCur?'text-white cur':''}}" bindtap="tabSelect" data-id="1">
      <text class="icon-upstagefill"></text> 排行榜
    </view>
    <view class="cu-item {{2==TabCur?'text-white cur':''}}" bindtap="tabSelect" data-id="2">
      <text class="icon-upstage"></text> jayChou
    </view>
    <view class="cu-item {{3==TabCur?'text-white cur':''}}" bindtap="tabSelect" data-id="3">
      <text class="icon-clothesfill"></text> 歌词
    </view>
  </scroll-view>
  <!-- search -->
  <view class="padB_80 padding bg-white" hidden="{{TabCur!=0}}">
    <form>
      <view class="cu-form-group">
        <view class="title">多列选择</view>
        <picker mode="multiSelector" bindchange="MultiChange" bindcolumnchange="MultiColumnChange" value="{{multiIndex}}" range="{{multiArray}}">
          <view class="picker">
            {{multiArray[0][multiIndex[0]]}}，{{multiArray[1][multiIndex[1]]}}
          </view>
        </picker>
      </view>
      
      <!-- <view class="flex solid-bottom padding justify-around">
        <view class="bg-orange padding-sm margin-xs radius">
          <view class="title">类型：</view>
          <picker class="flex-sub text-center" bindchange="PickerChange" value="{{index}}" range="{{picker}}">
            <view class="picker">
              {{index?picker[index]:'搜索类型：默认歌曲名'}}
            </view>
          </picker>
        </view>
        <view class="bg-yellow padding-sm margin-xs radius">
          <view class="title">来源：</view>
          <picker class="flex-sub text-center" bindchange="PickerChange" value="{{index}}" range="{{picker}}">
            <view class="picker">
              {{index?picker[index]:'搜索来源：默认QQ'}}
            </view>
          </picker>
        </view>
      </view> -->

      <view class="cu-form-group">
        <view class="title">歌曲搜索：</view>
        <input placeholder='名称' bindinput='searchNameFn'></input>
        <button bindtap='searchMusic' class=" cu-btn bg-green shadow">搜索</button>
      </view>
    </form>
    <!-- searchlist -->
    <view hidden="{{!loadModal}}" class="bg-white flex-sub radius shadow-lg">
      <image src="https://image.weilanwl.com/gif/loading-white.gif" mode="aspectFit" class="gif-white response" style="height:240rpx"></image>
    </view>
    <scroll-view hidden="{{loadModal || !searchList.length}}" scroll-y class='bg-yellow padding radius text-center shadow-blur light h300'>
      <view bindtap='getSinglePlay' wx:for="{{searchList}}" wx:key="id" data-musicIndex="{{index}}" data-music="{{song}}" wx:for-item="song" class="lh28 db fs_14">{{song.songname}}----{{song.singer.name}}</view>
    </scroll-view>
  </view>
  <!-- songs list -->
  <view class="padding bg-white padB_80" hidden="{{TabCur!=1}}">
    <view class="padding-xs d_in w100p" wx:key="cur_count" bindtap='getSinglePlay' data-music="{{item}}" wx:for="{{songList}}">
      <view class="cu-tag line-green radius w100p h40 lh40 j_l">{{item.songname}}</view>
    </view>
  </view>
  <!-- jayChou list -->
  <view class="padB_80 padding bg-white" hidden="{{TabCur!=2}}">
    <view class="cu-form-group margin-top">
      <view class="title">开启jaychou循环模式</view>
      <switch bindchange='jaySwicth'></switch>
    </view>
    <view class="padding-xs d_in" wx:key="id" bindtap='getSinglePlay' data-music="{{jay}}" data-musicIndex="{{index}}" wx:for="{{jayList}}" wx:for-item="jay" wx:key>
      <view class="cu-tag line-green radius">{{jay.songname}}</view>
    </view>
  </view>
  <!-- song detail -->
  <scroll-view scroll-y class="padB_80 bg-green padding radius shadow-blur light h300" hidden="{{TabCur!=3}}">
    <text class='w100p lh40'>
      {{songData.lrcContext}}
    </text>
  </scroll-view>

</block>

<!-- <view class='cu-load load-modal' wx:if="{{loadModal}}">
  <view class="cu-avatar round png" mode="aspectFit" style="background-image:url(/imgs/logo.png);"></view>
  <view class='gray-text'>加载中...</view>
</view> -->